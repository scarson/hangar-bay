# 10. Hangar Bay Theming Guide (Angular Material M3)

**Version:** 1.0
**Date:** 2025-06-27

## 1. Overview

This document defines the official strategy for theming the Hangar Bay Angular application. To ensure consistency, maintainability, and a modern user experience, this project uses the **Material 3 (M3) theming system** provided by Angular Material (v19+).

This system is based on CSS Custom Properties (variables) and is designed for dynamic, accessible, and comprehensive theming.

## 2. The Single Source of Truth

The single source of truth for all color values in this application is:

`app/frontend/angular/src/theme.scss`

This file is generated by the Angular Material M3 schematic and contains the complete palette of color roles as CSS variables (e.g., `var(--md-sys-color-primary)`, `var(--md-sys-color-surface-container)`).

**This file is the only place where colors are defined.**

## 3. Core Rules & Best Practices

These rules are mandatory for all theming and styling work.

### DO:

- **Rule:** Use CSS variables from `theme.scss` for ALL color values.
- **Rule:** Apply colors based on their semantic meaning as defined by the Material 3 system (e.g., `primary` for key actions, `error` for destructive actions or errors, `surface` for component backgrounds).
- **Rule:** Use the corresponding `on-` color for text and icons to ensure accessible contrast (e.g., on a `primary` background, use `on-primary` for text).

### FORBIDDEN:

- **Forbidden:** Do not use hardcoded color values (e.g., `#FFFFFF`, `rgb(10, 20, 30)`, `white`). The only exception is for third-party component overrides where CSS variables are not supported, and this must be explicitly approved.
- **Forbidden:** Do not use the `::ng-deep` shadow-piercing combinator to style Angular Material components. Their themes should be customized via the supported CSS variables.
- **Forbidden:** Do not use any legacy (pre-v19) Angular Material Sass mixins or functions (e.g., `mat.define-palette`, `mat.legacy-theme`, `mat.get-color-from-palette`).

## 4. Pre-Commit Theming Checklist

Before finalizing any styling or theming changes, you **MUST** verify your code against this checklist and confirm your compliance.

- [ ] **No Hardcoded Colors:** I have scanned my changes and confirmed that no hardcoded hex, rgb, or named colors were used.
- [ ] **Used Theme Variables:** All colors are applied using the appropriate `var(--md-sys-color-...)` variables from `theme.scss`.
- [ ] **Semantic Color Usage:** The color roles I used match their intended semantic purpose (e.g., primary actions use the `primary` color role).
- [ ] **No Legacy APIs:** My changes do not include any legacy `mat.*` Sass mixins or `::ng-deep`.

---

## 5. Generating & Updating the Theme

The `theme.scss` file was generated using the official Angular Material schematic. To regenerate it (for instance, to change the primary color), run the following command from the `app/frontend/angular/` directory:

```bash
# This example uses #6750A4 (the default M3 purple) as the seed color.
ng generate @angular/material:m3-theme --name theme --project hangar-bay-frontend --primary-color "#6750A4"
```

This will overwrite the existing `src/theme.scss` with a new dark theme based on the provided color.

## 6. Migration from Legacy Theme

Previously, the application used a custom set of `oklch()` color variables defined directly in `src/app/app.scss`. This system has been **fully deprecated and removed** in favor of the centralized Material 3 theme.

- **What was removed?** All `--bright-blue`, `--gray-900`, etc., variables and the gradients built from them were deleted from `app.scss`.
- **Why?** To establish a single, maintainable, and standards-compliant source of truth for colors, ensuring consistency and leveraging the accessibility benefits of the Material 3 system.
- **What's the impact?** All components must now use the `var(--md-sys-color-...)` variables from `theme.scss`. Any remaining hardcoded colors or custom variables are considered a bug and must be refactored.
