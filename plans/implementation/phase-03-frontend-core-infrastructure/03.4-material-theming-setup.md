---
Phase: 03 - Foundational UI and Infrastructure
TaskID: 03.4
ExecutionSequence: 4
PreviousTask: ./03.3-basic-layout-routing-navigation.md
NextTask: ./03.5-[Next Task Name].md
ParentPlan: ../../phase-03-foundational-ui-and-infrastructure-overview.md
LastUpdated: 2024-07-29
---

# Task 03.4: Angular Material 3 Theming Setup

## 1. Objective

The primary objective of this task is to establish a robust and maintainable Material 3 (M3) theming foundation for the Hangar Bay frontend. This involves generating a comprehensive dark theme based on the official Angular Material documentation, integrating it into the application, and updating our internal theming guide to reflect this authoritative approach. The goal is to move beyond basic color theming to include typography and shape, ensuring a consistent and high-quality user interface that adheres to our dark-mode-only design decision.

## 2. Relevant Specifications

*   `../../../design/angular/guides/10-theming-guide.md`
*   Official Angular Material Theming Guide: [https://material.angular.io/guide/theming](https://material.angular.io/guide/theming)

## 3. Key Implementation Steps

### 3.1. Frontend (Angular)

*   [ ] **Step 1.1: Generate the Material 3 Dark Theme**
    *   **AI Prompt:** "Execute the Angular CLI command to generate a new Material 3 theme. The theme should be named `hangar-bay-dark-theme` and be configured as a dark theme from the start. Place the generated theme file in `src/app/styles/`."
    *   **Command:** `ng generate @angular/material:m3-theme --name=hangar-bay-dark-theme --theme=dark --directory=app/styles`

*   [ ] **Step 1.2: Integrate the Theme into the Application**
    *   Modify `angular.json` to include the path to the newly generated theme file (`src/app/styles/hangar-bay-dark-theme.css`) in the `styles` array for the `build` target. This will apply the theme globally.

*   [ ] **Step 1.3: Verify Theme Application**
    *   Run the application using `ng serve` and visually confirm that the dark theme has been applied correctly. Check that existing Material components (buttons, etc.) have adopted the new theme styles.

*   [ ] **Step 1.4: Update Internal Theming Guide**
    *   Edit `design/angular/guides/10-theming-guide.md` to incorporate the key learnings from the official documentation and the steps performed in this task. The guide should be updated to be the new source of truth for theming.

## 4. AI Implementation Guidance

*   When generating the theme, ensure the `--theme=dark` flag is used to create a dark theme directly, aligning with the project's dark-mode-only UI strategy.
*   The generated theme file should be placed in a dedicated `styles` directory (`src/app/styles`) for better organization.
*   When updating `angular.json`, be precise. Add the new style entry immediately after the main `styles.css` entry to ensure proper cascade behavior.

## 5. Definition of Done (DoD)

*   [ ] **Implementation Complete:** All steps in section 3 are completed.
*   [ ] **Criterion 1:** The new theme file `src/app/styles/hangar-bay-dark-theme.css` exists and contains the generated M3 dark theme CSS custom properties.
*   [ ] **Criterion 2:** `angular.json` is correctly updated to include the new theme file in the global styles.
*   [ ] **Criterion 3:** The application runs without errors and visually reflects the new dark theme across all existing Material components.
*   [ ] **Criterion 4:** The internal guide `design/angular/guides/10-theming-guide.md` is updated to be the authoritative source on M3 theming for this project.
*   [ ] All new/modified code is committed to the feature branch.

## 6. Challenges & Resolutions

*   (Placeholder for any challenges encountered and their resolutions during this task.)

## 7. Cross-Cutting Concerns Review

This section documents how the five key cross-cutting concerns were addressed during the completion of this task. Refer to the primary specification documents for detailed guidance:
*   Security: `/design/specifications/security-spec.md`
*   Observability: `/design/specifications/observability-spec.md`
*   Testing: `/design/specifications/test-spec.md`
*   Accessibility: `/design/specifications/accessibility-spec.md`
*   Internationalization (i18n): `/design/specifications/i18n-spec.md`

### 7.1. Security
*   [x] **Secure Design:** N/A
*   [x] **Input Validation:** N/A
*   [x] **Output Encoding:** N/A
*   [x] **Authentication/Authorization:** N/A
*   [x] **Secrets Management:** N/A
*   [ ] **Dependency Management:** The `@angular/material` package was added. It is a trusted package from Google, minimizing risk.
*   **Notes:** This task primarily involves generating and configuring CSS theme files, which has a negligible direct impact on application security.

### 7.2. Observability
*   [x] **Structured Logging:** N/A
*   [x] **Key Events Logged:** N/A
*   [x] **Error Logging:** N/A
*   [x] **Correlation IDs:** N/A
*   [x] **Metrics:** N/A
*   **Notes:** This is a client-side styling task and does not involve any logic that would require logging, metrics, or tracing.

### 7.3. Testing
*   [ ] **Unit Tests:** While no new logic is added, existing component tests should continue to pass. The full test suite must be run to confirm no visual or structural regressions were introduced by the theme application.
*   [x] **Integration Tests:** N/A
*   [x] **Test Coverage:** N/A, as no new logical code is being added.
*   [x] **Test Data Management:** N/A
*   **Notes:** The primary verification for this task is visual and through manual inspection of the running application, supplemented by running the existing test suite as a regression check.

### 7.4. Accessibility (A11y)
*(Primarily for UI-related tasks, but consider CLI/API accessibility where relevant)*
*   [x] **Semantic HTML/Structure:** N/A
*   [x] **ARIA Attributes:** N/A
*   [x] **Keyboard Navigability:** N/A
*   [ ] **Color Contrast:** This is the most critical concern for this task. The generated Material 3 theme is designed for good contrast, but a manual check of key components (buttons, text on various backgrounds, links) is required to verify compliance with WCAG AA standards.
*   [x] **Screen Reader Compatibility:** N/A
*   [x] **Alternative Text for Images:** N/A
*   **Notes:** The generated theme is the foundation for the application's accessibility. Ensuring the colors are compliant is a key part of the Definition of Done.

### 7.5. Internationalization (I18n)
*(Primarily for UI-related tasks, but consider for any user-facing text including logs/error messages)*
*   [x] **Text Abstraction:** N/A
*   [x] **Locale-Specific Formatting:** N/A
*   [x] **UI Layout Adaptability:** N/A
*   [x] **Character Encoding:** N/A
*   **Notes:** Theming does not involve user-facing strings or content. All text is handled at the component level and is out of scope for this task.
