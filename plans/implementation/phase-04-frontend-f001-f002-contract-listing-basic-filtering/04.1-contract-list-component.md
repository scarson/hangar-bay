# Task 04.1: Contract List Component

**Phase:** 04 - Frontend - F001/F002: Contract Listing & Basic Filtering
**Parent Plan:** [MVP Implementation Plan Overview](../00-mvp-implementation-plan-overview.md)
**Last Updated:** 2025-06-06

## 1. Objective

To develop an Angular component that fetches and displays a list of public contracts from the backend API. This includes displaying key contract details in a tabular or card-based format and implementing basic pagination.

## 2. Relevant Specifications

*   `../../../design/features/F001-Public-Contract-Aggregation-Display.md` (Defines what contract data to show)
*   `../../../design/design-spec.md` (Sections: UI/UX Principles, Frontend Architecture)
*   `../../../design/accessibility-spec.md` (Guidelines for accessible data display)
*   Task 03.2: Backend API Service Layer (Service to fetch contract data)
*   Task 02.4: API Endpoints for F001 (Backend API providing the data)

## 3. Key Implementation Steps

*   [ ] **Generate Contract List Component:**
    *   Use Angular CLI: `ng generate component features/contracts/contract-list` (or similar path).
*   [ ] **Integrate API Service:**
    *   Inject the API service (from Task 03.2) into the `ContractListComponent`.
    *   Call the service method to fetch contracts (e.g., `getContracts()`) in `ngOnInit`.
    *   Handle the `Observable` response (e.g., using `async` pipe in template or subscribing in component).
*   [ ] **Define Data Display Structure:**
    *   Decide on a display format (table, list of cards, etc.).
    *   Identify key contract fields to display (e.g., issuer, type, location, price, volume, expiry). Refer to F001 spec.
    *   Create the HTML template to render the list of contracts.
    *   **AI Prompt:** "Generate an Angular component template (`.html`) that displays a list of contracts. Each contract object has `issuer`, `type`, `location`, `price`, `volume`, `expires_at` properties. Display these in a responsive table using Angular Material or basic HTML table."
*   [ ] **Implement Basic Pagination:**
    *   The backend API (Task 02.4) should support pagination (page, size).
    *   Add UI elements for pagination (e.g., "Next", "Previous" buttons, page number display).
    *   Update the API call in the component to pass pagination parameters.
    *   Manage pagination state (current page, total items/pages).
    *   **AI Prompt:** "Show how to implement simple client-side driven pagination controls in an Angular component that calls a service method `getContracts(page: number, size: number)`." (Note: True pagination might be server-driven, adjust prompt if backend handles total pages.)
*   [ ] **Styling:**
    *   Apply basic SCSS styling for readability and presentation.
*   [ ] **Loading and Empty States:**
    *   Implement UI indicators for when data is loading.
    *   Display a message if no contracts are found or an error occurs.

## 4. AI Implementation Guidance

*   Use Angular's `*ngFor` to iterate over contract data.
*   Consider using Angular Material components (e.g., `MatTable`, `MatPaginator`) for a richer UI, if Material is part of the project.
*   Ensure data is displayed in a user-friendly and accessible manner.
*   Handle potential `null` or `undefined` values gracefully in the template.

## 5. Definition of Done

*   `ContractListComponent` is created and integrated into the routing (from Task 03.3).
*   The component fetches and displays a list of contracts from the backend.
*   Key contract details are visible.
*   Basic pagination functionality is implemented.
*   Loading and empty/error states are handled.
*   Component is styled for basic usability.
*   All new files and code changes are committed to version control.
