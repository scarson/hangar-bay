# Task 06.1: Advanced Filtering Component

**Phase:** 06 - Frontend - F002: Advanced Filtering Implementation
**Parent Plan:** [MVP Implementation Plan Overview](../00-mvp-implementation-plan-overview.md)
**Last Updated:** 2025-06-06

## 1. Objective

To develop an Angular component that provides a user interface for the advanced search and filtering capabilities defined in Feature F002. This component will allow users to specify complex filter criteria and apply them to the contract list.

## 2. Relevant Specifications

*   `../../../design/features/F002-Ship-Browsing-Advanced-Search-Filtering.md` (Primary source for UI elements and filter types)
*   `../../../design/design-spec.md` (Sections: UI/UX Principles, Frontend Architecture)
*   `../../../design/accessibility-spec.md` (Guidelines for accessible form controls)
*   Task 04.1: Contract List Component (The component whose data will be filtered)
*   Task 04.2: Basic Filtering UI (May be extended or replaced by this advanced component)
*   Task 05.2: Update API Endpoints for F002 (Backend API that accepts these advanced filters)

## 3. Key Implementation Steps

*   [ ] **Generate Advanced Filter Component:**
    *   Use Angular CLI: `ng generate component features/filters/advanced-filter` (or similar path).
*   [ ] **Design UI for Advanced Filters:**
    *   Based on F002, lay out UI elements for each advanced filter:
        *   Text input for item name/type search.
        *   Number inputs/sliders for price ranges, volume ranges.
        *   Multi-select dropdowns or checkbox groups for ship types, factions, etc. (if applicable).
        *   Potentially a more complex location filter (solar system, constellation, multi-region select).
    *   Consider grouping related filters for better usability.
    *   **AI Prompt:** "Generate HTML for an Angular component form that includes: a text input for 'Item Name', two number inputs for 'Min Price' and 'Max Price', and a multi-select dropdown for 'Ship Category' (options: Frigate, Destroyer, Cruiser, Battleship). Include an 'Apply Advanced Filters' button."
*   [ ] **Manage Filter State with Angular Forms:**
    *   Use `ReactiveFormsModule` for managing the complex state of advanced filters.
    *   Define a `FormGroup` with `FormControl`s for each filter criterion.
    *   Implement validation as needed (e.g., min price < max price).
*   [ ] **Integrate with Contract List / API Service:**
    *   The `AdvancedFilterComponent` will need to communicate the selected filters to the `ContractListComponent` or directly to the API service.
    *   This could be done via an event emitter (`@Output()`), a shared service, or by directly calling the API service if the filter component also triggers the data fetch.
    *   Update the API call to include all selected advanced filter parameters, as defined in Task 05.2.
*   [ ] **Trigger Data Refresh:**
    *   Provide a clear way to apply the advanced filters (e.g., an "Apply Filters" button).
    *   Optionally, consider a "Reset Filters" button.
*   [ ] **Dynamic Data for Filters (e.g., Ship Types, Locations):**
    *   Plan how to populate dropdowns for dynamic data (e.g., a list of all available ship types, regions, constellations). This might require new API endpoints or using static data for MVP.
    *   **AI Prompt:** "In an Angular Reactive Form, how can I dynamically populate options for a `mat-select` form control named `shipType` from an array of objects `shipTypes = [{id: 1, name: 'Frigate'}, {id: 2, name: 'Destroyer'}]` fetched from a service?"
*   [ ] **Styling and Layout:**
    *   Style the component for clarity and ease of use. Ensure it integrates well with the overall page layout.

## 4. AI Implementation Guidance

*   `ReactiveFormsModule` is highly recommended for complex forms.
*   Break down the advanced filter UI into smaller, manageable sub-components if it becomes too large.
*   Ensure a good user experience for applying and clearing filters.
*   Pay attention to accessibility for all form controls.

## 5. Definition of Done

*   `AdvancedFilterComponent` is created.
*   UI elements for all advanced filters specified in F002 are implemented.
*   Filter state is managed using Angular `ReactiveFormsModule`.
*   The component can communicate selected filters to update the contract list (either directly or indirectly).
*   Functionality to apply and potentially reset filters is present.
*   Consideration for populating dynamic filter data (e.g., ship types) is made.
*   Component is styled and integrates with the existing layout.
*   All new files and code changes are committed to version control.
